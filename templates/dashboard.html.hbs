<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - NeighborGoods</title>
    {{> partials/styles}}
</head>
<body>
    {{> partials/navbar}}

    <main class="container">
        <h2>Dashboard</h2>
        
        <div class="dashboard">
            <div class="map-container">
                <p>Community Map (Interactive map will be displayed here)</p>
                <!-- Map will be implemented here -->
            </div>
            
            <div class="card">
                <h3>Collective Actions</h3>
                {{#if collective_actions.length}}
                    {{#each collective_actions}}
                        <div class="list-item">
                            <div class="list-item-title">{{this.title}}</div>
                            <div class="list-item-description">{{this.description}}</div>
                            <div class="list-item-meta">
                                <span>Status: {{this.status}}</span>
                                <span>Expires: {{this.expiry_date}}</span>
                            </div>
                            <a href="/campaigns/{{this.id}}" class="action-button">View Details</a>
                        </div>
                    {{/each}}
                {{else}}
                    <p>No active collective actions at this time.</p>
                {{/if}}
                <a href="/campaigns" class="view-all">View All Campaigns</a>
            </div>
            
            <div class="card">
                <h3>Recent Posts</h3>
                {{#if posts.length}}
                    {{#each posts}}
                        <div class="list-item">
                            <div class="list-item-title">{{this.title}}</div>
                            <div class="list-item-description">{{this.excerpt}}</div>
                            <div class="list-item-meta">
                                <span>By: {{this.author}}</span>
                                <span>Posted: {{this.date}}</span>
                            </div>
                            <a href="/posts/{{this.id}}" class="action-button">Read More</a>
                        </div>
                    {{/each}}
                {{else}}
                    <p>No recent posts.</p>
                {{/if}}
                <a href="/feed" class="view-all">View All Posts</a>
            </div>
            
            <div class="card">
                <h3>Your Outstanding Commitments</h3>
                {{#if commitments.length}}
                    {{#each commitments}}
                        <div class="list-item">
                            <div class="list-item-title">{{this.title}}</div>
                            <div class="list-item-description">{{this.description}}</div>
                            <div class="list-item-meta">
                                <span>Type: {{this.type}}</span>
                                <span>Due: {{this.due_date}}</span>
                            </div>
                            <a href="/commitments/{{this.id}}" class="action-button">View Details</a>
                        </div>
                    {{/each}}
                {{else}}
                    <p>You have no outstanding commitments.</p>
                {{/if}}
                <a href="/profile#commitments" class="view-all">View All Commitments</a>
            </div>
            
            <div class="card">
                <h3>Items You're Responsible For</h3>
                {{#if items}}
                    {{#each items}}
                        <div class="list-item">
                            <div class="list-item-title">{{this.1.name}}</div>
                            <div class="list-item-description">{{this.1.description}}</div>
                            <div class="list-item-meta">
                                <span>Borrow Purpose: {{this.0.purpose}}</span>
                                <span>Borrowed At: {{this.0.created_at}}</span>
                            </div>
                            <a href="/items/{{this.1.id}}" class="action-button">View Item</a>
                        </div>
                    {{/each}}
                {{else}}
                    <p>You are not currently responsible for any items.</p>
                {{/if}}
                <a href="/profile#items" class="view-all">View All Items</a>
            </div>
        </div>
    </main>

    {{> partials/footer}}
</body>
</html>
